# دليل المستخدم - منشئ التقارير المخصصة
## Custom Reports Builder - User Guide

---

## 📋 جدول المحتويات / Table of Contents

1. [مقدمة](#مقدمة)
2. [الوصول للنظام](#الوصول-للنظام)
3. [واجهة المستخدم](#واجهة-المستخدم)
4. [دليل خطوة بخطوة](#دليل-خطوة-بخطوة)
5. [قوالب التقارير الجاهزة](#قوالب-التقارير-الجاهزة)
6. [المرشحات المتقدمة](#المرشحات-المتقدمة)
7. [التصدير والمشاركة](#التصدير-والمشاركة)
8. [النصائح والحيل](#النصائح-والحيل)
9. [استكشاف الأخطاء وإصلاحها](#استكشاف-الأخطاء-وإصلاحها)

---

## 🌟 مقدمة

منشئ التقارير المخصصة هو أداة قوية ومرنة تتيح لك إنشاء تقارير مخصصة من بيانات نظام المحاسبة الخاص بك. يمكنك:

- ✅ إنشاء تقارير مخصصة بدون الحاجة لمعرفة تقنية
- ✅ اختيار البيانات والحقول التي تحتاجها فقط
- ✅ تطبيق مرشحات متقدمة للحصول على النتائج المطلوبة
- ✅ ترتيب وتجميع البيانات حسب احتياجاتك
- ✅ حفظ التقارير المفضلة لديك لإعادة الاستخدام
- ✅ تصدير النتائج بصيغ متعددة (CSV, Excel, PDF)

---

## 🔐 الوصول للنظام

### المتطلبات الأساسية:
- **الصلاحيات المطلوبة:** `custom_reports.read`
- **المتصفحات المدعومة:** Chrome, Firefox, Safari, Edge (أحدث إصدارين)
- **دقة الشاشة المنصوح بها:** 1280x720 أو أعلى

### كيفية الوصول:
1. سجل الدخول إلى نظام المحاسبة
2. انتقل إلى قائمة "التقارير" في الشريط الجانبي
3. اختر "التقارير المخصصة" من القائمة
4. أو استخدم الرابط المباشر: `/reports/custom`

---

## 🎨 واجهة المستخدم

### الأقسام الرئيسية:

#### 1. **شريط العنوان**
- عنوان الصفحة والوصف
- أزرار الحفظ والتحديث
- مؤشر الحالة الحالية

#### 2. **التبويبات الرئيسية**
- **تبويب إنشاء التقرير:** لإنشاء وتحرير التقارير
- **تبويب النتائج:** لعرض نتائج التقارير المُنفَّذة

#### 3. **معالج إنشاء التقرير (5 خطوات)**
```
خطوة 1: اختيار مصدر البيانات
خطوة 2: اختيار الحقول
خطوة 3: إعداد المرشحات
خطوة 4: الترتيب والتجميع
خطوة 5: معاينة النتائج
```

#### 4. **اللوحة الجانبية**
- الإجراءات السريعة
- ملخص التقرير الحالي
- أزرار المعاينة والتشغيل

---

## 📖 دليل خطوة بخطوة

### الخطوة 1: اختيار مصدر البيانات

**الهدف:** اختيار مجموعة البيانات التي تريد إنشاء التقرير منها.

**الخطوات:**
1. ستظهر لك قائمة بمصادر البيانات المتاحة
2. كل مصدر يحتوي على:
   - **الاسم:** وصف مصدر البيانات
   - **الوصف:** تفاصيل ما يحتويه
   - **عدد الحقول:** الحقول المتاحة للاستخدام
   - **اسم الجدول:** المرجع التقني
3. انقر على مصدر البيانات المطلوب
4. ستظهر رسالة تأكيد وستنتقل تلقائياً للخطوة التالية

**مصادر البيانات المتاحة عادة:**
- **المعاملات المالية:** جميع المعاملات مع تفاصيل الحسابات
- **الحسابات:** دليل الحسابات الهرمي
- **المشاريع:** قائمة المشاريع وتفاصيلها

### الخطوة 2: اختيار الحقول

**الهدف:** تحديد الأعمدة التي تريد ظهورها في التقرير.

**الخطوات:**
1. ستظهر قائمة بجميع الحقول المتاحة
2. يمكنك استخدام البحث للعثور على حقول محددة
3. الحقول مُجمَّعة حسب النوع:
   - **نص:** أسماء، أوصاف، أكواد
   - **رقم:** مبالغ، كميات، مستويات
   - **تاريخ:** تواريخ المعاملات والإنشاء
   - **نعم/لا:** حالات مثل "مُرحَّل" أو "نشط"
4. انقر على ☑️ بجانب كل حقل تريد إضافته
5. يمكنك رؤية الحقول المختارة في المنطقة العلوية
6. لحذف حقل، انقر على ❌ في الـ Chip الخاص به

**نصائح:**
- ابدأ بالحقول الأساسية مثل الاسم والكود والمبلغ
- يمكنك إضافة المزيد من الحقول لاحقاً
- الحقول ذات العلامة 🔍 قابلة للتصفية
- الحقول ذات العلامة ↕️ قابلة للترتيب

### الخطوة 3: إعداد المرشحات

**الهدف:** تحديد الشروط لتصفية البيانات المعروضة.

**أنواع المرشحات:**

#### للحقول النصية:
- **يساوي:** نص مطابق تماماً
- **لا يساوي:** كل النصوص عدا المحدد
- **يحتوي على:** نص يحتوي على الكلمة المحددة
- **ضمن القائمة:** إدخال عدة قيم مفصولة بفواصل

#### للحقول الرقمية:
- **يساوي / لا يساوي**
- **أكبر من / أكبر من أو يساوي**
- **أصغر من / أصغر من أو يساوي**

#### للتواريخ:
- **في تاريخ محدد**
- **قبل / بعد تاريخ محدد**
- **بين تاريخين**

**خطوات إضافة مرشح:**
1. انقر على "إضافة مرشح"
2. اختر الحقل المطلوب
3. اختر نوع المرشح (المشغل)
4. أدخل القيمة
5. انقر "إضافة"

**أمثلة شائعة:**
```
المبلغ أكبر من 1000
تاريخ الإدخال في آخر 30 يوم
حالة الترحيل = مُرحَّل
كود الحساب يحتوي على "1001"
```

### الخطوة 4: الترتيب والتجميع

**الترتيب:**
- حدد الحقل المطلوب ترتيب النتائج حسبه
- اختر الاتجاه: تصاعدي (A-Z، 1-9) أو تنازلي (Z-A، 9-1)
- يمكنك إضافة عدة مستويات ترتيب

**التجميع:**
- اختر الحقول التي تريد تجميع النتائج حسبها
- مفيد لإنشاء تقارير مُلخَّصة
- مثال: تجميع المعاملات حسب الحساب أو المشروع

### الخطوة 5: معاينة النتائج

**الغرض:** رؤية عينة من النتائج قبل تشغيل التقرير كاملاً.

**ما ستراه:**
- أول 10 صفوف من النتائج
- أسماء الأعمدة
- وقت التنفيذ
- العدد الإجمالي للنتائج

**الإجراءات المتاحة:**
- **تحديث المعاينة:** إذا غيرت في المرشحات
- **تشغيل التقرير الكامل:** للحصول على جميع النتائج
- **العودة للخطوة السابقة:** لتعديل الإعدادات

---

## 🎯 قوالب التقارير الجاهزة

لتوفير الوقت، يوفر النظام قوالب جاهزة للسيناريوهات الشائعة:

### الفئات المتاحة:

#### 💰 التقارير المالية
- **تقرير الملخص المالي:** نظرة شاملة على الأداء المالي
- **التقرير المالي للمشاريع:** تحليل الأداء المالي لكل مشروع

#### ⚙️ التقارير التشغيلية  
- **تقرير تفاصيل المعاملات:** عرض تفصيلي لجميع المعاملات

#### 📊 التقارير التحليلية
- **تقرير تحليل الحسابات:** تحليل شامل لنشاط الحسابات

#### 📋 تقارير الامتثال
- **تقرير الامتثال والمراجعة:** للمتطلبات التنظيمية

### كيفية استخدام القوالب:
1. في الخطوة الأولى، ستجد قسم "قوالب التقارير الجاهزة"
2. استخدم البحث أو الفلترة حسب الفئة
3. انقر "معاينة" لرؤية تفاصيل القالب
4. انقر "استخدام" لتطبيق القالب
5. يمكنك تعديل القالب حسب احتياجاتك

---

## 🔍 المرشحات المتقدمة

### تقنيات متقدمة:

#### 1. **استخدام البدائل المتعددة**
```
كود الحساب ضمن القائمة: 1001, 1002, 1003
```

#### 2. **المرشحات التاريخية المرنة**
```
من بداية الشهر الحالي:
تاريخ الإدخال >= 2024-01-01

آخر 30 يوم:
تاريخ الإدخال >= [التاريخ الحالي - 30 يوم]
```

#### 3. **الجمع بين عدة مرشحات**
```
المبلغ > 1000
AND حالة الترحيل = مُرحَّل
AND تاريخ الإدخال في آخر شهر
```

### أمثلة تطبيقية:

#### **للمحاسبين:**
```
المعاملات غير المُرحَّلة:
- حالة الترحيل = غير مُرحَّل
- تاريخ الإدخال في آخر 7 أيام

المعاملات عالية القيمة:
- المبلغ > 10000
- حالة الترحيل = مُرحَّل
```

#### **لمدراء المشاريع:**
```
نشاط المشروع الحالي:
- كود المشروع = PRJ001
- تاريخ الإدخال في الشهر الحالي

مقارنة المشاريع:
- حالة المشروع ضمن القائمة: نشط, مكتمل
- ميزانية المشروع > 100000
```

---

## 📤 التصدير والمشاركة

### خيارات التصدير المتاحة:

#### 1. **CSV (Comma-Separated Values)**
- **الأنسب لـ:** فتح في Excel أو برامج الجداول
- **المميزات:** سريع، حجم صغير، يدعم العربية
- **الاستخدام:** التحليل الإضافي، المشاركة البسيطة

#### 2. **Excel (.xlsx)**
- **الأنسب لـ:** التحليل المتقدم والتقارير المهنية  
- **المميزات:** 
  - صفحة بيانات + صفحة معلومات إضافية
  - تنسيق تلقائي للأعمدة
  - يحافظ على أنواع البيانات
- **الاستخدام:** العروض التقديمية، التحليل المالي

#### 3. **PDF**
- **الأنسب لـ:** المشاركة الرسمية والأرشفة
- **المميزات:**
  - تنسيق مهني ثابت
  - صفحات منسقة بوضوح
  - مناسب للطباعة
- **الاستخدام:** التقارير الرسمية، الأرشفة

#### 4. **JSON**
- **الأنسب لـ:** التكامل مع أنظمة أخرى
- **المميزات:** يحتوي على معلومات إضافية ومفصلة
- **الاستخدام:** التطوير، API Integration

#### 5. **نسخ للحافظة**
- **الأنسب لـ:** اللصق السريع في برامج أخرى
- **المميزات:** فوري، لا يحتاج تحميل ملف
- **الاستخدام:** النسخ السريع لجداول صغيرة

### نصائح التصدير:
- **للبيانات الكبيرة:** استخدم CSV أو Excel
- **للتقارير الرسمية:** استخدم PDF
- **للمشاركة السريعة:** استخدم Copy to Clipboard
- **لحفظ الوقت:** احفظ التقرير أولاً كـ Preset

---

## 💡 النصائح والحيل

### نصائح للأداء:
1. **ابدأ بمرشحات محددة** لتقليل كمية البيانات
2. **استخدم المعاينة** قبل تشغيل التقرير الكامل
3. **احفظ التقارير المفضلة** كـ Presets
4. **استخدم الترقيم** للتنقل في البيانات الكبيرة

### نصائح لتصميم التقارير:
1. **اختر أسماء واضحة** للحقول المهمة
2. **رتب الحقول منطقياً** (التاريخ، الكود، الاسم، المبلغ)
3. **استخدم المرشحات بذكاء** للتركيز على البيانات المهمة
4. **جرب القوالب الجاهزة** كنقطة انطلاق

### نصائح للإنتاجية:
1. **استخدم البحث السريع** في اختيار الحقول
2. **احفظ المرشحات الشائعة** في الـ Presets
3. **استخدم التجميع** لإنشاء تقارير ملخصة
4. **جرب تصدير عينة صغيرة** قبل التصدير الكامل

---

## 🛠️ استكشاف الأخطاء وإصلاحها

### المشاكل الشائعة والحلول:

#### 🚫 "ليس لديك صلاحية لعرض التقارير المخصصة"
**السبب:** نقص في الصلاحيات
**الحل:** تواصل مع مدير النظام لإضافة صلاحية `custom_reports.read`

#### 🚫 "لا توجد مصادر بيانات متاحة"
**السبب:** لم يتم إعداد مصادر البيانات بعد
**الحل:** تواصل مع مدير النظام لإعداد report_datasets

#### 🚫 "فشل في تحميل البيانات"
**الأسباب المحتملة:**
- مشكلة في الاتصال بالإنترنت
- مشكلة في الخادم
- مرشحات معقدة جداً

**الحلول:**
1. تحديث الصفحة (F5)
2. تبسيط المرشحات
3. تجربة تقرير أبسط أولاً

#### 🚫 "لا توجد نتائج تطابق الشروط"
**الأسباب المحتملة:**
- المرشحات دقيقة جداً
- لا توجد بيانات للفترة المحددة
- خطأ في قيم المرشحات

**الحلول:**
1. مراجعة المرشحات وتبسيطها
2. توسيع الفترة الزمنية
3. التحقق من قيم المرشحات

#### 🚫 "التصدير فشل"
**الأسباب المحتملة:**
- البيانات كبيرة جداً
- مشكلة في المتصفح
- نقص في الذاكرة

**الحلول:**
1. استخدام مرشحات لتقليل البيانات
2. تجربة متصفح مختلف
3. تصدير على دفعات أصغر

### التواصل للدعم التقني:
عند التواصل مع الدعم، يرجى تضمين:
- **نص الخطأ بالتفصيل**
- **الخطوات التي قمت بها**
- **نوع المتصفح والإصدار**
- **حجم البيانات التقريبي**

---

## 📞 معلومات الاتصال

**للدعم التقني:**
- البريد الإلكتروني: support@yourcompany.com
- الهاتف: +966-xxx-xxxx
- ساعات الدعم: الأحد - الخميس، 8:00 ص - 5:00 م

**للتدريب:**
- دورات تدريبية منتظمة
- جلسات تدريب فردية عند الطلب
- مواد تدريبية متاحة عبر الإنترنت

---

## 📈 تحديثات وإصدارات جديدة

يتم تحديث منشئ التقارير المخصصة بانتظام مع ميزات جديدة:

### الميزات القادمة:
- 📊 **الرسوم البيانية:** إضافة charts وgraphs للتقارير
- ⏰ **جدولة التقارير:** تشغيل تلقائي وإرسال بالبريد الإلكتروني  
- 🔗 **Dashboard Integration:** عرض التقارير على الشاشة الرئيسية
- 🎨 **قوالب إضافية:** المزيد من القوالب الجاهزة

### كيفية معرفة التحديثات:
- تحقق من قسم "ما الجديد" في النظام
- اشتراك في النشرة البريدية للتحديثات
- متابعة إشعارات النظام

---

*آخر تحديث: يناير 2025*
*الإصدار: 1.0*

---

> 💡 **تلميح:** احتفظ بهذا الدليل في مكان يسهل الوصول إليه للمراجعة السريعة أثناء العمل!
