const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/Dashboard-vKgp2o14.js","js/chunk-DJbo4Ij0.js","js/chunk-Snc12Wy2.js","js/chunk-BiYih6dJ.js","js/chunk-BAc-3_I_.js","js/chunk-DcNwBDbw.js","js/chunk-C32pL9JV.js","js/chunk-Bp_xDJbA.js","css/admin-components-t24TQFaP.css","js/chunk-BTrgr397.js","js/chunk-DkT960zO.js","js/chunk-xH88V2YM.js","css/business-components-DuBYp9Uz.css","js/chunk-Bq2PtQ59.js","js/ExpensesCategories-BikOnVxU.js","css/ExpensesCategories-Ck4xkLc1.css","js/WorkItems-PD4UwSp_.js","css/WorkItems-Ba8yZDj5.css","js/CostCenters-EExtdkp7.js","css/CostCenters-C18Z6SLH.css","js/TestRTL-Cs7gLBf7.js","js/ExportTestPage-DF_w8L5T.js","js/GeneralLedger-qAO09-bH.js","js/chunk-iq-NYzsV.js","css/GeneralLedger-CnCZN_WW.css","js/ProfitLoss-BDVzYkkM.js","js/chunk-DRfWFgH8.js","css/ProfitLoss-XT3sYqlO.css","js/BalanceSheet-B6BX7goY.js","css/BalanceSheet-Dl4lfic7.css","js/WorkItemUsage-Cb-431Rw.js","css/WorkItemUsage-Il4hSvk5.css","js/AccountExplorer-enDQN6Cb.js","js/CustomReports-DbkAjVZO.js","js/chunk-DI1NGzAw.js","js/ProjectManagement-C8UiZaf6.js","css/ProjectManagement-CcmtTRaA.css","js/OrganizationManagementTabs-CDmaDDjx.js","css/OrganizationManagementTabs-Bbi0b9iR.css","js/FontSettings-DhnK7RkG.js","js/TransactionClassification-BrD1x5uR.js","js/TransactionClassificationReports-C1A-oIwi.js"])))=>i.map(i=>d[i]);
import{r as x,R as o,j as e,ac as je,Z as ve,ag as Ee,ah as we,ai as Ae,aj as Se,ak as u,al as K,am as ke}from"../js/chunk-Snc12Wy2.js";import{b as q,a as Te,d as ze,u as ue,s as L,_ as v,A as Ce,T as Pe,e as Fe}from"../js/chunk-DJbo4Ij0.js";import{c as Le,p as Ie}from"../js/chunk-xH88V2YM.js";import{a5 as Q,a6 as Re,a7 as pe,a8 as De,u as me,B as A,g as N,T as C,a9 as U,s as ge,K as H,aa as te,M as O,r as G,L as ae,o as Me,ab as Oe,q as Be,p as Ne,t as Ve,a2 as We,P as Ue,b as $e,e as re}from"../js/chunk-BiYih6dJ.js";import{M as He,z as Ge,F as Je,H as qe,L as Ye,N as Ke,J as Xe,K as he,O as Ze,Q as X,v as Qe,u as et,W as ne,X as tt,Y as at,Z as rt,_ as nt,$ as st,a0 as it,a1 as ot,a2 as lt,a3 as ct,a4 as dt,a5 as ut,a6 as pt,a7 as mt,a8 as gt,a9 as ht,aa as ft,ab as xt,ac as _t,ad as bt,ae as yt,af as jt,ag as vt,ah as Et,ai as wt,aj as At,ak as St,al as kt,am as Tt,an as zt,ao as Ct}from"../js/chunk-Bp_xDJbA.js";import{L as Pt,R as Ft,F as Lt,a as It}from"../js/chunk-DcNwBDbw.js";import"../js/chunk-BAc-3_I_.js";import"../js/chunk-C32pL9JV.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();const Rt=(t={})=>{const s=Math.max(1,Math.min(10,Math.floor(5)))*60*1e3,{timeout:c=18e5,warningTime:h=s,events:f=["mousedown","mousemove","keypress","scroll","touchstart","click","keydown"]}=t,{user:E,signOut:g}=q(),{showToast:d}=Te(),p=x.useRef(null),r=x.useRef(null),z=x.useRef(Date.now()),w=x.useCallback(()=>{p.current&&(clearTimeout(p.current),p.current=null),r.current&&(clearTimeout(r.current),r.current=null)},[]),P=x.useCallback(async()=>{console.log("[useIdleLogout] Auto-logging out due to inactivity");try{await g()}catch(m){console.error("[useIdleLogout] Error during auto-logout:",m)}},[g]),i=x.useCallback(()=>{const m=Math.max(1,Math.round(h/6e4));d(`سيتم تسجيل الخروج تلقائياً خلال ${m} دقيقة بسبب عدم النشاط`,{severity:"warning",duration:m*6e4}),p.current=setTimeout(()=>{P()},h)},[h,P,d]),b=x.useCallback(()=>{if(!E)return;const m=Date.now();z.current=m,w(),r.current=setTimeout(()=>{i()},c-h)},[E,c,h,w,i]),y=x.useCallback(()=>{b()},[b]);return x.useEffect(()=>{if(!E){w();return}return b(),f.forEach(m=>{document.addEventListener(m,y,!0)}),()=>{w(),f.forEach(m=>{document.removeEventListener(m,y,!0)})}},[E,y,b,w,f]),x.useEffect(()=>()=>{w()},[w]),{lastActivity:z.current,resetTimer:b}},W=Le()(Ie((t,a)=>({language:"en",theme:"dark",sidebarCollapsed:!1,notifications:[],companyName:"Accounting Pro",user:null,setLanguage:n=>{t({language:n}),document.documentElement.dir=n==="ar"?"rtl":"ltr"},setTheme:n=>t({theme:n}),setSidebarCollapsed:n=>t({sidebarCollapsed:n}),setUser:n=>t({user:n}),toggleTheme:()=>{const{theme:n}=a();t({theme:n==="light"?"dark":"light"})},toggleLanguage:()=>{const{language:n}=a(),l=n==="en"?"ar":"en";t(s=>({...s,language:l})),document.documentElement.dir=l==="ar"?"rtl":"ltr",document.documentElement.lang=l},toggleSidebar:()=>{const{sidebarCollapsed:n}=a();t({sidebarCollapsed:!n})}}),{name:"accounting-app-store",partialize:t=>({language:t.language,theme:t.theme,sidebarCollapsed:t.sidebarCollapsed,notifications:t.notifications,companyName:t.companyName,user:t.user})})),fe={typography:{fontFamily:'"Segoe UI", "Tahoma", "Geneva", "Verdana", sans-serif',h1:{fontWeight:700,fontSize:"2.125rem"},h2:{fontWeight:700,fontSize:"1.875rem"},h3:{fontWeight:600,fontSize:"1.5rem"},h4:{fontWeight:600,fontSize:"1.25rem"},h5:{fontWeight:600,fontSize:"1.125rem"},h6:{fontWeight:600,fontSize:"1rem"},body1:{fontSize:"0.875rem",lineHeight:1.43},body2:{fontSize:"0.75rem",lineHeight:1.43}},shape:{borderRadius:12},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:8,fontWeight:500}}},MuiCard:{styleOverrides:{root:{borderRadius:16,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"}}},MuiPaper:{styleOverrides:{root:{borderRadius:12}}},MuiDrawer:{styleOverrides:{paper:{borderRadius:0}}}}},Dt=Q({palette:{mode:"light",primary:{main:"#2076FF",light:"#4A90FF",dark:"#1A5FE6"},secondary:{main:"#21C197"},background:{default:"#F5F6FA",paper:"#FFFFFF"},text:{primary:"#181C23",secondary:"#70778A"},divider:"#E2E6ED",error:{main:"#DE3F3F",light:"#FF6B6B",dark:"#C53030"},warning:{main:"#FFC048",light:"#FFD369",dark:"#F6A000"},success:{main:"#21C197",light:"#4ED4A8",dark:"#16A085"},info:{main:"#2076FF",light:"#4A90FF",dark:"#1A5FE6"}},...fe}),Mt=Q({palette:{mode:"dark",primary:{main:"#2076FF",light:"#4A90FF",dark:"#1A5FE6"},secondary:{main:"#21C197"},background:{default:"#181A20",paper:"#23272F"},text:{primary:"#EDEDED",secondary:"#8D94A2"},divider:"#393C43",error:{main:"#DE3F3F",light:"#FF6B6B",dark:"#C53030"},warning:{main:"#FFC048",light:"#FFD369",dark:"#F6A000"},success:{main:"#21C197",light:"#4ED4A8",dark:"#16A085"},info:{main:"#2076FF",light:"#4A90FF",dark:"#1A5FE6"},action:{hover:"rgba(32, 118, 255, 0.08)",selected:"rgba(32, 118, 255, 0.12)"}},...fe}),Ot=(t,a)=>{const n=t==="light"?Dt:Mt;return Q({...n,direction:a==="ar"?"rtl":"ltr",typography:{...n.typography,fontFamily:a==="ar"?'"Segoe UI", "Tahoma", "Arial", sans-serif':'"Segoe UI", "Tahoma", "Geneva", "Verdana", sans-serif'}})},xe=x.createContext(void 0),Bt=({children:t})=>{const[a,n]=x.useState("dark"),[l,s]=x.useState(0),{language:c}=W();x.useEffect(()=>{const g=localStorage.getItem("themeMode");g&&(g==="light"||g==="dark")&&n(g)},[]),x.useEffect(()=>{localStorage.setItem("themeMode",a)},[a]),x.useEffect(()=>{s(g=>g+1)},[c]);const h=()=>{n(g=>g==="light"?"dark":"light")};x.useEffect(()=>{typeof document<"u"&&document.documentElement.setAttribute("data-theme",a)},[a]);const f=o.useMemo(()=>{console.log("[ThemeContext] Creating theme with mode:",a,"language:",c,"forceRender:",l);const g=Ot(a,c);return console.log("[ThemeContext] Created theme direction:",g.direction),g},[a,c,l]);x.useEffect(()=>{const g=document.documentElement,d=f.palette,p=d?.mode||a,r=(z,w)=>{typeof w=="string"&&w.length&&g.style.setProperty(z,w)};r("--background",d?.background?.default),r("--surface",d?.background?.paper),r("--border",d?.divider),r("--accent",d?.primary?.main),r("--text",d?.text?.primary),r("--muted_text",d?.text?.secondary),r("--heading",d?.text?.primary),r("--error",d?.error?.main),r("--success",d?.success?.main),r("--warning",d?.warning?.main),p==="dark"?(r("--field_bg",d?.background?.paper),r("--selected_bg","#343940"),r("--sidebar_bg","#22262A"),r("--topbar_bg",d?.background?.paper),r("--button_bg",d?.primary?.main),r("--button_text","#FFFFFF"),r("--table_header_bg","#22262A"),r("--table_row_bg",d?.background?.paper),r("--modal_bg",d?.background?.paper),r("--active_tab_bg","#343940")):(r("--field_bg","#F1F3F7"),r("--selected_bg","#E4EAFE"),r("--sidebar_bg","#FFFFFF"),r("--topbar_bg",d?.background?.default),r("--button_bg",d?.primary?.main),r("--button_text","#FFFFFF"),r("--table_header_bg","#F1F3F7"),r("--table_row_bg","#FFFFFF"),r("--modal_bg","#FFFFFF"),r("--active_tab_bg","#E4EAFE")),r("--accent-primary",d?.primary?.main),r("--accent-primary-hover",d?.primary?.dark||d?.primary?.main),r("--content-bg",d?.background?.paper),r("--text-primary",d?.text?.primary),r("--text-secondary",d?.text?.secondary),r("--border-color",d?.divider),r("--border-light",d?.divider),r("--primary-blue",d?.primary?.main);try{const z=d?.getContrastText?d.getContrastText(d?.primary?.main):void 0;r("--on-accent",z||"#ffffff")}catch{r("--on-accent","#ffffff")}r("--success-strong",d?.success?.dark||d?.success?.main),r("--warning-strong",d?.warning?.dark||d?.warning?.main),r("--error-strong",d?.error?.dark||d?.error?.main),r("--info",d?.info?.main),r("--info-strong",d?.info?.dark||d?.info?.main),r("--hover-bg",d?.action?.hover||(p==="dark"?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.05)")),r("--chip-bg",d?.action?.selected||(p==="dark"?"rgba(255,255,255,0.10)":"#e5e7eb")),r("--row-alt-bg",d?.action?.selected||(p==="dark"?"rgba(255,255,255,0.03)":"#f7fafc")),r("--info-bg","rgba(32, 118, 255, 0.08)")},[f,a]);const E={themeMode:a,toggleTheme:h};return e.jsx(xe.Provider,{value:E,children:e.jsxs(Re,{theme:f,children:[e.jsx(pe,{}),t]})})},Nt=()=>{const t=x.useContext(xe);if(t===void 0)throw new Error("useCustomTheme must be used within a CustomThemeProvider");return t},Vt=[{id:"revenue",title:"Total Revenue",titleEn:"Total Revenue",titleAr:"إجمالي الإيرادات",value:"125,420 ر.س",change:12.5,icon:"trending-up",color:"success"},{id:"expenses",title:"Total Expenses",titleEn:"Total Expenses",titleAr:"إجمالي المصروفات",value:"89,320 ر.س",change:-5.2,icon:"trending-down",color:"error"},{id:"profit",title:"Net Profit",titleEn:"Net Profit",titleAr:"صافي الربح",value:"36,100 ر.س",change:8.3,icon:"dollar-sign",color:"primary"},{id:"pending",title:"Pending Invoices",titleEn:"Pending Invoices",titleAr:"الفواتير المعلقة",value:"23",change:-2.1,icon:"clock",color:"warning"}],Ta=Vt,se={en:{welcome:"Welcome",goodMorning:"Good Morning",goodAfternoon:"Good Afternoon",goodEvening:"Good Evening",dashboard:"Dashboard",recentTransactions:"Recent Transactions",monthlyRevenue:"Monthly Revenue",expenseBreakdown:"Expense Breakdown",viewAll:"View All",totalRevenue:"Total Revenue",totalExpenses:"Total Expenses",netProfit:"Net Profit",pendingInvoices:"Pending Invoices",income:"Income",expense:"Expense",sales:"Sales",purchases:"Purchases",salaries:"Salaries",services:"Services",officeExpenses:"Office Expenses",english:"English",arabic:"Arabic"},ar:{welcome:"أهلاً وسهلاً",goodMorning:"صباح الخير",goodAfternoon:"مساء الخير",goodEvening:"مساء الخير",dashboard:"لوحة التحكم",recentTransactions:"المعاملات الأخيرة",monthlyRevenue:"الإيرادات الشهرية",expenseBreakdown:"تفصيل المصروفات",viewAll:"عرض الكل",totalRevenue:"إجمالي الإيرادات",totalExpenses:"إجمالي المصروفات",netProfit:"صافي الربح",pendingInvoices:"الفواتير المعلقة",income:"دخل",expense:"مصروف",sales:"مبيعات",purchases:"مشتريات",salaries:"رواتب",services:"خدمات",officeExpenses:"مصاريف مكتبية",english:"English",arabic:"العربية"}},ie={en:{notifications:"Notifications",profile:"Profile",settings:"Settings",logout:"Logout",date:"Date",description:"Description",category:"Category",type:"Type",amount:"Amount"},ar:{notifications:"الإشعارات",profile:"الملف الشخصي",settings:"الإعدادات",logout:"تسجيل الخروج",date:"التاريخ",description:"الوصف",category:"الفئة",type:"النوع",amount:"المبلغ"}},Wt={en:{...se.en,...ie.en},ar:{...se.ar,...ie.ar}},Ut=({onMenuClick:t})=>{const{language:a,toggleLanguage:n}=W(),{user:l}=q(),{profile:s}=ze(),{themeMode:c,toggleTheme:h}=Nt(),[f,E]=x.useState(null),[g,d]=x.useState(null),p=a==="ar",r=Wt[a];o.useEffect(()=>{},[a,p]);const z=_=>{E(_.currentTarget)},w=()=>{E(null)},P=_=>{d(_.currentTarget)},i=()=>{d(null)},b=()=>{const _=new Date().getHours();return _<12?r.goodMorning:_<18?r.goodAfternoon:r.goodEvening},y=()=>s?.first_name?`${s.first_name} ${s.last_name||""}`.trim():s?.full_name_ar?s.full_name_ar:l?.email?.split("@")[0]||"User",m=()=>{if(s?.first_name)return(s.first_name.charAt(0)+(s.last_name?.charAt(0)||"")).toUpperCase();if(s?.full_name_ar){const _=s.full_name_ar.split(" ");return _.length>1?(_[0].charAt(0)+_[_.length-1].charAt(0)).toUpperCase():s.full_name_ar.charAt(0).toUpperCase()}return l?.email?.charAt(0).toUpperCase()||"U"};return e.jsxs(e.Fragment,{children:[e.jsx(De,{position:"fixed",elevation:0,sx:{zIndex:_=>_.zIndex.drawer+1,backgroundColor:"background.paper",color:"text.primary",borderBottom:1,borderColor:"divider",backdropFilter:"blur(8px)",background:_=>_.palette.mode==="dark"?"rgba(18, 18, 18, 0.95)":"rgba(255, 255, 255, 0.95)"},children:e.jsxs(me,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,flexDirection:p?"row-reverse":"row"},children:[e.jsx(A,{sx:{display:"flex",alignItems:"center"},children:e.jsx(N,{edge:"start","aria-label":"menu",onClick:t,sx:{color:"text.primary",bgcolor:"action.hover",borderRadius:"12px","&:hover":{bgcolor:"action.selected",transform:"scale(1.05)"},transition:"all 0.2s ease"},children:e.jsx(He,{})})}),e.jsxs(C,{variant:"h6",component:"div",sx:{flexGrow:1,textAlign:"center",fontWeight:500,letterSpacing:"-0.5px"},children:[b(),", ",y(),"!"]}),e.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(U,{title:"Theme Settings",placement:"bottom",children:e.jsx(N,{onClick:()=>{},sx:{color:"text.primary",bgcolor:"transparent",border:"1px solid",borderColor:"divider",borderRadius:"12px","&:hover":{bgcolor:"action.hover",borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},transition:"all 0.2s ease"},children:e.jsx(Ge,{fontSize:"small"})})}),e.jsx(U,{title:c==="light"?"Switch to Dark Mode":"Switch to Light Mode",placement:"bottom",children:e.jsx(N,{onClick:h,sx:{color:c==="light"?"warning.main":"primary.light",bgcolor:c==="light"?"warning.light":"primary.dark",borderRadius:"12px","&:hover":{bgcolor:c==="light"?"warning.main":"primary.main",color:"white",transform:"rotate(180deg) scale(1.1)"},transition:"all 0.3s ease"},children:c==="light"?e.jsx(Je,{fontSize:"small"}):e.jsx(qe,{fontSize:"small"})})}),e.jsx(U,{title:a==="en"?"Switch to Arabic":"Switch to English",placement:"bottom",children:e.jsx(N,{onClick:()=>{n?.()},sx:{color:"text.primary",background:_=>`linear-gradient(135deg, ${_.palette.primary.light} 0%, ${_.palette.primary.main} 100%)`,borderRadius:"12px",position:"relative",overflow:"hidden","&:hover":{transform:"scale(1.1)","&::before":{transform:"translate(-50%, -50%) scale(1)"}},"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%)",transform:"translate(-50%, -50%) scale(0)",transition:"transform 0.5s ease"},transition:"all 0.2s ease"},children:e.jsx(Ye,{fontSize:"small",sx:{zIndex:1}})})}),e.jsx(U,{title:r.notifications,placement:"bottom",children:e.jsx(N,{onClick:P,sx:{color:"text.primary",bgcolor:"transparent",position:"relative","&:hover":{bgcolor:"action.hover",transform:"scale(1.05)"},transition:"all 0.2s ease"},children:e.jsx(ge,{badgeContent:4,sx:{"& .MuiBadge-badge":{bgcolor:"error.main",color:"white",fontWeight:600,fontSize:"0.65rem",minWidth:"18px",height:"18px",animation:"pulse 2s infinite"},"@keyframes pulse":{"0%":{boxShadow:"0 0 0 0 rgba(244, 67, 54, 0.7)"},"70%":{boxShadow:"0 0 0 10px rgba(244, 67, 54, 0)"},"100%":{boxShadow:"0 0 0 0 rgba(244, 67, 54, 0)"}}},children:e.jsx(Ke,{fontSize:"small"})})})}),e.jsx(U,{title:r.profile,placement:"bottom",children:e.jsx(N,{onClick:z,sx:{p:.5,position:"relative","&::before":{content:'""',position:"absolute",inset:-2,borderRadius:"50%",padding:"2px",background:_=>`linear-gradient(135deg, ${_.palette.primary.main} 0%, ${_.palette.secondary.main} 100%)`,mask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",maskComposite:"exclude",WebkitMask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMaskComposite:"xor"},"&:hover":{transform:"scale(1.1)"},transition:"all 0.2s ease"},children:s?.avatar_url?e.jsx(H,{src:s.avatar_url,sx:{width:36,height:36,border:"2px solid",borderColor:"background.paper"}}):e.jsx(H,{sx:{width:36,height:36,bgcolor:"primary.main",fontWeight:600,fontSize:"1rem",border:"2px solid",borderColor:"background.paper"},children:m()})})})]})]})}),e.jsxs(te,{anchorEl:f,open:!!f,onClose:w,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsx(O,{onClick:w,children:e.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,py:1},children:[s?.avatar_url?e.jsx(H,{src:s.avatar_url,sx:{width:40,height:40}}):e.jsx(H,{sx:{width:40,height:40,bgcolor:"primary.main"},children:m()}),e.jsxs(A,{children:[e.jsx(C,{variant:"subtitle2",children:y()}),e.jsx(C,{variant:"body2",color:"text.secondary",children:l?.email||s?.email||"user@example.com"})]})]})}),e.jsx(G,{}),e.jsxs(O,{onClick:()=>{w(),window.location.href="/settings/profile"},children:[e.jsx(Xe,{sx:{mr:2}}),r.profile]}),e.jsxs(O,{onClick:w,children:[e.jsx(he,{sx:{mr:2}}),r.settings]}),e.jsx(G,{}),e.jsxs(O,{onClick:w,children:[e.jsx(Ze,{sx:{mr:2}}),r.logout]})]}),e.jsxs(te,{anchorEl:g,open:!!g,onClose:i,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},PaperProps:{sx:{width:300,maxHeight:400}},children:[e.jsx(O,{onClick:i,children:e.jsxs(A,{sx:{py:1},children:[e.jsx(C,{variant:"subtitle2",children:"New invoice received"}),e.jsx(C,{variant:"body2",color:"text.secondary",children:"Invoice #1025 from ABC Company"})]})}),e.jsx(G,{}),e.jsx(O,{onClick:i,children:e.jsxs(A,{sx:{py:1},children:[e.jsx(C,{variant:"subtitle2",children:"Payment reminder"}),e.jsx(C,{variant:"body2",color:"text.secondary",children:"Invoice #1023 is due tomorrow"})]})}),e.jsx(G,{}),e.jsx(O,{onClick:i,children:e.jsxs(A,{sx:{py:1},children:[e.jsx(C,{variant:"subtitle2",children:"Monthly report ready"}),e.jsx(C,{variant:"body2",color:"text.secondary",children:"Your January financial report is ready"})]})})]})]})},V=[{id:"dashboard",label:"Dashboard",titleEn:"Dashboard",titleAr:"لوحة التحكم",icon:"dashboard",path:"/"},{id:"main-data",label:"Main Data",titleEn:"Main Data",titleAr:"البيانات الأساسية",icon:"database",children:[{id:"accounts-tree",label:"Accounts Tree",titleEn:"Tree of Accounts",titleAr:"شجرة الحسابات",icon:"tree-structure",path:"/main-data/accounts-tree"},{id:"organizations",label:"Organizations",titleEn:"Organizations",titleAr:"إدارة المؤسسات",icon:"building",path:"/main-data/organizations"},{id:"projects",label:"Projects",titleEn:"Projects",titleAr:"إدارة المشاريع",icon:"folder",path:"/main-data/projects"},{id:"transaction-classification",label:"Transaction Classification",titleEn:"Transaction Classification",titleAr:"تصنيفات المعاملات",icon:"tag",path:"/main-data/transaction-classification"},{id:"expenses-categories",label:"Expenses Categories",titleEn:"Expenses Categories",titleAr:"فئات المصروفات",icon:"Category",path:"/main-data/expenses-categories"},{id:"work-items",label:"Work Items",titleEn:"Work Items",titleAr:"عناصر الأعمال",icon:"tree-structure",path:"/main-data/work-items"},{id:"cost-centers",label:"Cost Centers",titleEn:"Cost Centers",titleAr:"مراكز التكلفة",icon:"target",path:"/main-data/cost-centers"}]},{id:"transactions",label:"Transactions",titleEn:"Transactions",titleAr:"المعاملات المالية",icon:"receipt",children:[{id:"my-transactions",label:"My Transactions",titleEn:"My Transactions",titleAr:"معاملاتي",icon:"user-check",path:"/transactions/my",requiredPermission:"transactions.read.own"},{id:"pending-transactions",label:"Pending Approval",titleEn:"Pending Approval",titleAr:"في انتظار الموافقة",icon:"clock",path:"/transactions/pending",requiredPermission:"transactions.post"},{id:"all-transactions",label:"All Transactions",titleEn:"All Transactions",titleAr:"جميع المعاملات",icon:"list",path:"/transactions/all",requiredPermission:"transactions.read.all"}]},{id:"reports",label:"Reports",titleEn:"Financial Reports",titleAr:"التقارير المالية",icon:"chart-line",children:[{id:"trial-balance",label:"Trial Balance",titleEn:"Trial Balance",titleAr:"ميزان المراجعة",icon:"scale",path:"/reports/trial-balance"},{id:"trial-balance-all-levels",label:"Trial Balance (All Levels)",titleEn:"Trial Balance (All Levels)",titleAr:"ميزان المراجعة (شجري)",icon:"scale",path:"/reports/trial-balance-all-levels"},{id:"general-ledger",label:"General Ledger",titleEn:"General Ledger",titleAr:"دفتر الأستاذ",icon:"book",path:"/reports/general-ledger"},{id:"account-explorer",label:"Account Explorer",titleEn:"Account Explorer",titleAr:"أرصدة الحسابات",icon:"tree-structure",path:"/reports/account-explorer"},{id:"profit-loss",label:"Profit & Loss",titleEn:"Profit & Loss",titleAr:"قائمة الدخل",icon:"trending-up",path:"/reports/profit-loss"},{id:"balance-sheet",label:"Balance Sheet",titleEn:"Balance Sheet",titleAr:"الميزانية العمومية",icon:"file-text",path:"/reports/balance-sheet"},{id:"custom-reports",label:"Custom Reports Builder",titleEn:"Custom Reports Builder",titleAr:"منشئ التقارير المخصصة",icon:"Tune",path:"/reports/custom"},{id:"main-data-reports",label:"Main Data Reports",titleEn:"Main Data Reports",titleAr:"تقارير البيانات الأساسية",icon:"database",children:[{id:"transaction-classification-reports",label:"Transaction Classification Reports",titleEn:"Transaction Classification Reports",titleAr:"تقارير تصنيفات المعاملات",icon:"tag",path:"/reports/main-data/transaction-classification"},{id:"work-item-usage",label:"Work Item Usage",titleEn:"Work Item Usage",titleAr:"استخدام عناصر الأعمال",icon:"activity",path:"/reports/main-data/work-item-usage"}]}]},{id:"settings",label:"Settings",titleEn:"System Settings",titleAr:"إعدادات النظام",icon:"settings",children:[{id:"users",label:"Users",titleEn:"Users",titleAr:"المستخدمون",icon:"users",path:"/settings/users"},{id:"roles",label:"Roles & Permissions",titleEn:"Roles & Permissions",titleAr:"الأدوار والصلاحيات",icon:"shield",path:"/settings/roles"},{id:"org-management",label:"Organization Management",titleEn:"Organization Management",titleAr:"إدارة المؤسسة",icon:"settings",path:"/settings/organization-management"},{id:"account-prefix-mapping",label:"Account Prefix Mapping",titleEn:"Account Prefix Mapping",titleAr:"تصنيف رموز الحسابات",icon:"settings",path:"/settings/account-prefix-mapping"},{id:"font-preferences",label:"Font Settings",titleEn:"Font & Formatting",titleAr:"إعدادات الخطوط والتنسيق",icon:"type",path:"/settings/font-preferences"},{id:"diagnostics",label:"Diagnostics",titleEn:"Diagnostics",titleAr:"التشخيص",icon:"activity",path:"/settings/diagnostics",superAdminOnly:!0},{id:"organization-management",label:"Organization Settings",titleEn:"Company/Organization Settings",titleAr:"إعدادات المؤسسة",icon:"settings",path:"/settings/organization-management"}]}],_e=280,be=64,oe=t=>{switch(t){case"Dashboard":return e.jsx(ne,{});case"AccountTree":return e.jsx(Ct,{});case"Receipt":return e.jsx(zt,{});case"Description":return e.jsx(Tt,{});case"People":return e.jsx(kt,{});case"LocalShipping":return e.jsx(St,{});case"Assessment":return e.jsx(At,{});case"Inventory":return e.jsx(wt,{});case"Settings":return e.jsx(he,{});case"List":return e.jsx(Et,{});case"Add":return e.jsx(vt,{});case"EditNote":return e.jsx(jt,{});case"Book":return e.jsx(yt,{});case"Balance":return e.jsx(bt,{});case"ShoppingCart":return e.jsx(_t,{});case"RequestQuote":return e.jsx(xt,{});case"PersonOutline":return e.jsx(ft,{});case"Assignment":return e.jsx(ht,{});case"Business":return e.jsx(gt,{});case"TrendingUp":return e.jsx(mt,{});case"AccountBalance":return e.jsx(X,{});case"MonetizationOn":return e.jsx(pt,{});case"BarChart":return e.jsx(ut,{});case"Category":return e.jsx(dt,{});case"SwapHoriz":return e.jsx(ct,{});case"Summarize":return e.jsx(lt,{});case"Group":return e.jsx(ot,{});case"Tune":return e.jsx(it,{});case"Backup":return e.jsx(st,{});case"Security":return e.jsx(nt,{});case"database":return e.jsx(rt,{});case"tag":return e.jsx(at,{});case"type":return e.jsx(tt,{});default:return e.jsx(ne,{})}},$t=()=>{const{sidebarCollapsed:t,language:a,companyName:n}=W(),[l,s]=x.useState(["dashboard"]),c=je(),h=ve(),f=a==="ar",E=ue();o.useEffect(()=>{},[a,f]);const g=(i,b)=>{for(const y of b){if(y.id===i)return y;if(y.children){const m=g(i,y.children);if(m)return m}}return null},d=(i,b,y=[])=>{for(const m of i){const _=[...y,m.id];if(m.id===b)return _;if(m.children){const k=d(m.children,b,_);if(k)return k}}return null},p=i=>{if(!i||!i.children)return[];const b=[],y=m=>{for(const _ of m)b.push(_.id),_.children&&y(_.children)};return y(i.children),b},r=i=>{s(b=>{const y=d(V,i)||[i],m=y[0];if(y.length===1){if(b.includes(i)){const F=g(i,V),D=new Set([i,...p(F||void 0)]);return b.filter(B=>!D.has(B))}const k=b.filter(F=>{const D=d(V,F);return D&&D[0]===i});return Array.from(new Set([...k,i]))}else{const k=g(i,V);if(b.includes(i)){const D=new Set([i,...p(k||void 0)]);return b.filter(B=>!D.has(B))}const F=b.filter(D=>{const B=d(V,D);return B&&B[0]===m});return Array.from(new Set([...F,m,i]))}})},z=i=>{c(i)},w=i=>i?h.pathname===i:!1,P=(i,b=0)=>{const y=i.children&&i.children.length>0,m=l.includes(i.id),_=a==="ar"?i.titleAr:i.titleEn,k=w(i.path);return i.requiredPermission&&!E(i.requiredPermission)||i.superAdminOnly&&!E("admin.all")?null:e.jsxs(o.Fragment,{children:[e.jsx(Me,{disablePadding:!0,sx:{display:"block"},children:e.jsxs(Oe,{onClick:()=>{y?r(i.id):i.path&&z(i.path)},sx:{minHeight:52,justifyContent:t?"center":"initial",px:b>0?1.5:2,py:1,mx:b>0?1:.5,my:.25,[f?"pr":"pl"]:b>0?3.5+b*1.5:2,backgroundColor:k?"primary.main":m&&y?"action.selected":"transparent",borderRadius:b>0?"8px":"12px",border:k?"1px solid":"none",borderColor:k?"primary.light":"transparent",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&:hover":{backgroundColor:k?"primary.dark":y?"action.selected":"action.hover",transform:t?"none":"translateX(4px)",boxShadow:t?"none":"0 4px 12px rgba(0,0,0,0.15)"},"&:active":{transform:t?"none":"translateX(2px)"},"&::before":{content:'""',position:"absolute",top:0,left:f?"auto":0,right:f?0:"auto",width:"3px",height:"100%",background:k?F=>`linear-gradient(180deg, ${F.palette.primary.contrastText} 0%, ${F.palette.primary.contrastText}cc 100%)`:"transparent",borderRadius:"0 2px 2px 0",transition:"all 0.2s ease-in-out"}},children:[e.jsx(Be,{sx:{minWidth:0,[f?"ml":"mr"]:t?"auto":3,justifyContent:"center",color:k?"primary.contrastText":m&&y?"primary.main":"text.secondary",fontSize:"20px",transition:"all 0.2s ease-in-out"},children:i.badge?e.jsx(ge,{badgeContent:i.badge?.text,color:"error",children:oe(i.icon||"Dashboard")}):oe(i.icon||"Dashboard")}),e.jsx(Ne,{primary:_,sx:{opacity:t?0:1,"& .MuiListItemText-primary":{color:k?"primary.contrastText":m&&y?"primary.main":"text.primary",fontWeight:k?600:m&&y?500:400,fontSize:"14px",transition:"all 0.2s ease-in-out"}}}),y&&!t&&e.jsx(A,{sx:{color:k?"primary.contrastText":m?"primary.main":"text.secondary",transition:"all 0.2s ease-in-out",transform:"rotate(0deg)"},children:m?e.jsx(Qe,{}):e.jsx(et,{})})]})}),y&&e.jsx(Ve,{in:m&&!t,timeout:"auto",unmountOnExit:!0,children:e.jsx(ae,{component:"div",disablePadding:!0,children:i.children?.map(F=>P(F,b+1))})})]},i.id)};return e.jsxs(A,{component:"nav",sx:{width:t?be:_e,flexShrink:0,transition:i=>i.transitions.create("width",{easing:i.transitions.easing.sharp,duration:i.transitions.duration.enteringScreen}),overflowX:"hidden",overflowY:"auto",borderRight:f?0:1,borderLeft:f?1:0,borderColor:"divider",backgroundColor:"background.paper",backdropFilter:i=>i.palette.mode==="dark"?"none":"blur(10px)",boxShadow:f?"-4px 0 24px rgba(0, 0, 0, 0.12)":"4px 0 24px rgba(0, 0, 0, 0.12)",height:"100%","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"3px","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.3)"}}},children:[e.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:t?"center":"flex-start",px:t?1:2.5,py:2.5,minHeight:72,borderBottom:1,borderColor:"divider",background:i=>`linear-gradient(135deg, ${i.palette.primary.main}15 0%, ${i.palette.primary.light}10 100%)`,position:"relative","&::after":{content:'""',position:"absolute",bottom:0,left:0,right:0,height:"1px",background:i=>`linear-gradient(90deg, transparent 0%, ${i.palette.primary.main}40 50%, transparent 100%)`}},children:[!t&&e.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(A,{sx:{p:1,borderRadius:"12px",background:i=>`linear-gradient(135deg, ${i.palette.primary.main} 0%, ${i.palette.primary.dark} 100%)`,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:e.jsx(X,{sx:{color:"primary.contrastText",fontSize:"24px"}})}),e.jsx(C,{variant:"h6",noWrap:!0,component:"div",sx:{color:"primary.main",fontWeight:700,fontSize:"18px",letterSpacing:"-0.5px"},children:n})]}),t&&e.jsx(A,{sx:{p:1.5,borderRadius:"12px",background:i=>`linear-gradient(135deg, ${i.palette.primary.main} 0%, ${i.palette.primary.dark} 100%)`,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:e.jsx(X,{sx:{color:"primary.contrastText",fontSize:"28px"}})})]}),e.jsx(A,{sx:{overflow:"auto"},children:e.jsx(ae,{children:V.map(i=>P(i))})})]})},Ht=()=>{const{sidebarCollapsed:t,language:a}=W(),n=a==="ar",l=typeof document<"u"&&document.getElementById("sidebar-root")||null;if(!l)return null;const s=t?be:_e;return Ee.createPortal(e.jsx("div",{style:{position:"fixed",top:64,[n?"right":"left"]:0,height:"calc(100dvh - 64px)",width:s,zIndex:1300,pointerEvents:"auto",direction:n?"rtl":"ltr"},children:e.jsx($t,{open:!t})}),l)},Gt=()=>{const{sidebarCollapsed:t,toggleSidebar:a,language:n}=W(),[l,s]=o.useState(!0),c=n==="ar";o.useEffect(()=>{s(!1),document.documentElement.dir=c?"rtl":"ltr",document.documentElement.lang=n;const f=setTimeout(()=>{s(!0)},50);return()=>clearTimeout(f)},[n]);const h=()=>{a?.()};return l?e.jsxs(A,{sx:{display:"flex",flexDirection:"column",width:"100vw",height:"100vh",overflow:"hidden"},children:[e.jsx(pe,{}),e.jsx(Ut,{onMenuClick:h}),e.jsx(Ht,{}),e.jsx(A,{sx:{display:"flex",flexDirection:"row",flex:1,overflow:"hidden"},children:e.jsxs(A,{component:"main",sx:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"background.default",overflow:"hidden"},children:[e.jsx(me,{}),e.jsx(A,{sx:{flex:1,p:3,overflow:"auto",...c?{paddingRight:`${t?64:280}px`}:{paddingLeft:`${t?64:280}px`}},children:e.jsx(we,{})})]})})]},c?"rtl-layout":"ltr-layout"):null};function Jt(){const[t,a]=x.useState(null),[n,l]=x.useState(null),s=async()=>{l(null);const{data:c,error:h}=await L.auth.getSession();h&&l(h.message),a(c?.session??null)};return x.useEffect(()=>{s()},[]),e.jsx(We,{maxWidth:"md",sx:{py:4},children:e.jsxs(Ue,{sx:{p:3,direction:"rtl"},children:[e.jsx(C,{variant:"h5",gutterBottom:!0,children:"تشخيص نظام الدخول"}),e.jsxs($e,{direction:"row",spacing:2,mb:2,children:[e.jsx(re,{variant:"contained",onClick:s,children:"تحديث الحالة"}),e.jsx(re,{variant:"outlined",onClick:async()=>{await L.auth.signOut(),await s()},children:"تسجيل الخروج"})]}),n&&e.jsxs(A,{sx:{color:"error.main",mb:2},children:["خطأ: ",n]}),e.jsx("pre",{style:{background:"#111",color:"#0f0",padding:12,borderRadius:8,overflow:"auto"},children:JSON.stringify({supabaseUrl:`https://bgxknceshxxifwytalex.supabase.co\r
`,hasAnonKey:!0,session:t},null,2)})]})})}const qt=o.lazy(()=>v(()=>import("../js/Dashboard-vKgp2o14.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),Yt=o.lazy(()=>v(()=>import("../js/chunk-DkT960zO.js").then(t=>t.W),__vite__mapDeps([10,2,3,4,1,5,6,7,8,11,12]))),Kt=o.lazy(()=>v(()=>import("../js/ExpensesCategories-BikOnVxU.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,10,11,12,15]))),Xt=o.lazy(()=>v(()=>import("../js/WorkItems-PD4UwSp_.js"),__vite__mapDeps([16,2,3,4,10,1,5,6,7,8,11,12,9,17]))),Zt=o.lazy(()=>v(()=>import("../js/CostCenters-EExtdkp7.js"),__vite__mapDeps([18,2,3,4,1,5,6,7,8,10,11,12,9,19]))),Qt=o.lazy(()=>v(()=>import("../js/TestRTL-Cs7gLBf7.js"),__vite__mapDeps([20,2,3,4,1,5,6,7,8,11]))),ea=o.lazy(()=>v(()=>import("../js/ExportTestPage-DF_w8L5T.js"),__vite__mapDeps([21,2,3,4,10,1,5,6,7,8,11,12]))),Y=o.lazy(()=>v(()=>import("../js/chunk-DkT960zO.js").then(t=>t.Y),__vite__mapDeps([10,2,3,4,1,5,6,7,8,11,12]))),ta=o.lazy(()=>v(()=>import("../js/GeneralLedger-qAO09-bH.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,10,11,12,23,24]))),aa=o.lazy(()=>v(()=>import("../js/ProfitLoss-BDVzYkkM.js"),__vite__mapDeps([25,2,3,4,1,5,6,7,8,10,11,12,26,27]))),ra=o.lazy(()=>v(()=>import("../js/BalanceSheet-B6BX7goY.js"),__vite__mapDeps([28,2,3,4,1,5,6,7,8,10,11,12,29]))),na=o.lazy(()=>v(()=>import("../js/WorkItemUsage-Cb-431Rw.js"),__vite__mapDeps([30,2,3,4,10,1,5,6,7,8,11,12,9,31]))),sa=o.lazy(()=>v(()=>import("../js/chunk-DkT960zO.js").then(t=>t.Z),__vite__mapDeps([10,2,3,4,1,5,6,7,8,11,12]))),ia=o.lazy(()=>v(()=>import("../js/AccountExplorer-enDQN6Cb.js"),__vite__mapDeps([32,2,3,4,10,1,5,6,7,8,11,12]))),oa=o.lazy(()=>v(()=>import("../js/CustomReports-DbkAjVZO.js"),__vite__mapDeps([33,2,3,4,1,5,6,7,8,23,34,11]))),la=o.lazy(()=>v(()=>import("../js/chunk-DJbo4Ij0.js").then(t=>t.g),__vite__mapDeps([1,2,3,4,5,6,7,8]))),ca=o.lazy(()=>v(()=>import("../js/chunk-DJbo4Ij0.js").then(t=>t.R),__vite__mapDeps([1,2,3,4,5,6,7,8]))),da=o.lazy(()=>v(()=>import("../js/chunk-DJbo4Ij0.js").then(t=>t.h),__vite__mapDeps([1,2,3,4,5,6,7,8]))),ua=o.lazy(()=>v(()=>import("../js/chunk-DJbo4Ij0.js").then(t=>t.P),__vite__mapDeps([1,2,3,4,5,6,7,8]))),pa=o.lazy(()=>v(()=>import("../js/ProjectManagement-C8UiZaf6.js"),__vite__mapDeps([35,2,3,4,9,1,5,6,7,8,10,11,12,36]))),le=o.lazy(()=>v(()=>import("../js/OrganizationManagementTabs-CDmaDDjx.js"),__vite__mapDeps([37,2,3,4,10,1,5,6,7,8,11,12,9,38]))),ma=o.lazy(()=>v(()=>import("../js/FontSettings-DhnK7RkG.js"),__vite__mapDeps([39,2,3,4,1,5,6,7,8,11]))),S=({title:t})=>e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx("h2",{children:t}),e.jsx("p",{children:"This page is under construction. The navigation and layout are fully functional!"})]}),I=({children:t})=>{const{user:a,loading:n}=q();return n?e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{children:"Loading authentication..."})}):a?e.jsx(e.Fragment,{children:t}):e.jsx(K,{to:"/login",replace:!0})},ce=({perm:t,children:a,fallback:n})=>ue()(t)?e.jsx(e.Fragment,{children:a}):n??e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx("h2",{children:"Access denied"}),e.jsx("p",{children:"You don't have permission to view this page."})]}),ga=()=>{Rt();const{language:t}=W();return x.useEffect(()=>{document.documentElement.dir=t==="ar"?"rtl":"ltr",document.documentElement.lang=t},[t]),e.jsx(e.Fragment,{children:e.jsx(Ae,{children:e.jsxs(Se,{children:[e.jsx(u,{path:"/login",element:e.jsx(Pt,{})}),e.jsx(u,{path:"/register",element:e.jsx(Ft,{})}),e.jsx(u,{path:"/forgot-password",element:e.jsx(Lt,{})}),e.jsx(u,{path:"/reset-password",element:e.jsx(It,{})}),e.jsx(u,{path:"/auth-debug",element:e.jsx(Jt,{})}),e.jsxs(u,{path:"/",element:e.jsx(I,{children:e.jsx(Gt,{})}),children:[e.jsx(u,{index:!0,element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(qt,{})})}),e.jsx(u,{path:"/test-rtl",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Qt,{})})}),e.jsx(u,{path:"/main-data/accounts-tree",element:e.jsx(o.Suspense,{fallback:e.jsx(e.Fragment,{children:"Loading..."}),children:e.jsx(Yt,{})})}),e.jsx(u,{path:"/main-data/expenses-categories",element:e.jsx(ce,{perm:"expenses_categories.view",children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Kt,{})})})}),e.jsx(u,{path:"/main-data/work-items",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Xt,{})})}),e.jsx(u,{path:"/main-data/cost-centers",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Zt,{})})}),e.jsx(u,{path:"/main-data/organizations",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(le,{})})}),e.jsx(u,{path:"/main-data/projects",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(pa,{})})}),e.jsx(u,{path:"/main-data/transaction-classification",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:o.createElement(o.lazy(()=>v(()=>import("../js/TransactionClassification-BrD1x5uR.js"),__vite__mapDeps([40,2,3,4,10,1,5,6,7,8,11,12]))))})}),e.jsx(u,{path:"/transactions/my",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Y,{})})}),e.jsx(u,{path:"/transactions/pending",element:e.jsx(ce,{perm:"transactions.review",children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Y,{})})})}),e.jsx(u,{path:"/transactions/all",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Y,{})})}),e.jsx(u,{path:"/accounts",element:e.jsx(S,{title:"Accounts List"})}),e.jsx(u,{path:"/accounts/add",element:e.jsx(S,{title:"Add Account"})}),e.jsx(u,{path:"/transactions/journal",element:e.jsx(S,{title:"Journal Entries"})}),e.jsx(u,{path:"/transactions/ledger",element:e.jsx(S,{title:"General Ledger"})}),e.jsx(u,{path:"/transactions/trial-balance",element:e.jsx(S,{title:"Trial Balance (legacy)"})}),e.jsx(u,{path:"/invoicing/sales",element:e.jsx(S,{title:"Sales Invoices"})}),e.jsx(u,{path:"/invoicing/purchases",element:e.jsx(S,{title:"Purchase Invoices"})}),e.jsx(u,{path:"/invoicing/quotations",element:e.jsx(S,{title:"Quotations"})}),e.jsx(u,{path:"/customers",element:e.jsx(S,{title:"Customers List"})}),e.jsx(u,{path:"/customers/statements",element:e.jsx(S,{title:"Customer Statements"})}),e.jsx(u,{path:"/suppliers",element:e.jsx(S,{title:"Suppliers List"})}),e.jsx(u,{path:"/suppliers/statements",element:e.jsx(S,{title:"Supplier Statements"})}),e.jsx(u,{path:"/reports/trial-balance",element:e.jsx(I,{children:e.jsx(o.Suspense,{fallback:e.jsx(e.Fragment,{children:"Loading..."}),children:o.createElement(o.lazy(()=>v(()=>import("../js/chunk-DkT960zO.js").then(a=>a._),__vite__mapDeps([10,2,3,4,1,5,6,7,8,11,12]))))})})}),e.jsx(u,{path:"/reports/trial-balance-all-levels",element:e.jsx(I,{children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(sa,{})})})}),e.jsx(u,{path:"/reports/general-ledger",element:e.jsx(I,{children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ta,{})})})}),e.jsx(u,{path:"/reports/account-explorer",element:e.jsx(I,{children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ia,{})})})}),e.jsx(u,{path:"/reports/profit-loss",element:e.jsx(I,{children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(aa,{})})})}),e.jsx(u,{path:"/reports/balance-sheet",element:e.jsx(I,{children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ra,{})})})}),e.jsx(u,{path:"/reports/main-data/transaction-classification",element:e.jsx(I,{children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:o.createElement(o.lazy(()=>v(()=>import("../js/TransactionClassificationReports-C1A-oIwi.js"),__vite__mapDeps([41,2,3,4,26,27,10,1,5,6,7,8,11,12,34]))))})})}),e.jsx(u,{path:"/reports/main-data/work-item-usage",element:e.jsx(I,{children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(na,{})})})}),e.jsx(u,{path:"/reports/cash-flow",element:e.jsx(S,{title:"Cash Flow Report"})}),e.jsx(u,{path:"/reports/custom",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(oa,{})})}),e.jsx(u,{path:"/inventory/items",element:e.jsx(S,{title:"Items Management"})}),e.jsx(u,{path:"/inventory/movements",element:e.jsx(S,{title:"Stock Movements"})}),e.jsx(u,{path:"/inventory/reports",element:e.jsx(S,{title:"Stock Reports"})}),e.jsx(u,{path:"/settings/company",element:e.jsx(K,{to:"/settings/organization-management",replace:!0})}),e.jsx(u,{path:"/settings/diagnostics",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(da,{})})}),e.jsx(u,{path:"/settings/account-prefix-mapping",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:o.createElement(o.lazy(()=>v(()=>import("../js/chunk-DJbo4Ij0.js").then(a=>a.i),__vite__mapDeps([1,2,3,4,5,6,7,8]))))})}),e.jsx(u,{path:"/settings/users",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(la,{})})}),e.jsx(u,{path:"/settings/roles",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ca,{})})}),e.jsx(u,{path:"/settings/organization-management",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(le,{})})}),e.jsx(u,{path:"/settings/org-members",element:e.jsx(K,{to:"/settings/organization-management",replace:!0})}),e.jsx(u,{path:"/settings/profile",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ua,{})})}),e.jsx(u,{path:"/settings/font-preferences",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ma,{})})}),e.jsx(u,{path:"/settings/preferences",element:e.jsx(S,{title:"Preferences"})}),e.jsx(u,{path:"/settings/backup",element:e.jsx(S,{title:"Backup & Restore"})}),e.jsx(u,{path:"/export-test",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ea,{})})})]})]})})})},za=[{name:"Segoe UI",value:"Segoe UI, sans-serif",category:"system"},{name:"Arial",value:"Arial, sans-serif",category:"system"},{name:"Helvetica",value:"Helvetica, sans-serif",category:"system"},{name:"Tahoma",value:"Tahoma, sans-serif",category:"system"},{name:"Verdana",value:"Verdana, sans-serif",category:"system"},{name:"Times New Roman",value:"Times New Roman, serif",category:"serif"},{name:"Georgia",value:"Georgia, serif",category:"serif"},{name:"Palatino",value:"Palatino, serif",category:"serif"},{name:"Courier New",value:"Courier New, monospace",category:"monospace"},{name:"Monaco",value:"Monaco, monospace",category:"monospace"},{name:"Noto Sans Arabic",value:"Noto Sans Arabic, Arial, sans-serif",category:"arabic"},{name:"Dubai",value:"Dubai, Arial, sans-serif",category:"arabic"},{name:"Droid Arabic Naskh",value:"Droid Arabic Naskh, Arial, sans-serif",category:"arabic"},{name:"Amiri",value:"Amiri, Times New Roman, serif",category:"arabic"},{name:"Cairo",value:"Cairo, Arial, sans-serif",category:"arabic"}],Ca=[{name:"خفيف جداً / Extra Light",value:"lighter"},{name:"عادي / Normal",value:"normal"},{name:"متوسط / Medium",value:"medium"},{name:"نصف عريض / Semi Bold",value:"semibold"},{name:"عريض / Bold",value:"bold"}],j={font_family:"Cairo, Arial, sans-serif",font_size_scale:1,line_height_scale:1,font_weight:"normal",letter_spacing_scale:1,is_arabic_optimized:!1,custom_css_variables:{}};let T=null,R=0;const ha=1800*1e3,$="font_prefs_v1",ee=t=>t?`${$}/${t}`:$;function J(t){try{let a=localStorage.getItem(ee(t));if(!a&&t&&(a=localStorage.getItem($)),!a)return null;const n=JSON.parse(a);if(!n)return null;const l=new Date().toISOString();return{id:n.id||"local",user_id:n.user_id||t||"local",font_family:n.font_family??j.font_family,font_size_scale:Number(n.font_size_scale??j.font_size_scale),line_height_scale:Number(n.line_height_scale??j.line_height_scale),font_weight:String(n.font_weight??j.font_weight),letter_spacing_scale:Number(n.letter_spacing_scale??j.letter_spacing_scale),is_arabic_optimized:!!n.is_arabic_optimized,custom_css_variables:n.custom_css_variables??{},created_at:n.created_at||l,updated_at:n.updated_at||l}}catch{return null}}function Z(t){return!!t&&/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/.test(t)}function M(t){try{const a=Z(t.user_id||"")?t.user_id:J(t.user_id)?.user_id||"local",n=ee(a),l=J(a),s={id:t.id||l?.id||"local",user_id:a,font_family:t.font_family??l?.font_family??j.font_family,font_size_scale:t.font_size_scale??l?.font_size_scale??j.font_size_scale,line_height_scale:t.line_height_scale??l?.line_height_scale??j.line_height_scale,font_weight:t.font_weight??l?.font_weight??j.font_weight,letter_spacing_scale:t.letter_spacing_scale??l?.letter_spacing_scale??j.letter_spacing_scale,is_arabic_optimized:t.is_arabic_optimized??l?.is_arabic_optimized??j.is_arabic_optimized,custom_css_variables:t.custom_css_variables??l?.custom_css_variables??{},created_at:l?.created_at||new Date().toISOString(),updated_at:new Date().toISOString()};localStorage.setItem(n,JSON.stringify(s))}catch{}}async function ye(){const t=Date.now();if(T&&t-R<ha)return T;try{const{data:a,error:n}=await L.rpc("get_user_font_preferences");if(!n&&a)return T=a,R=t,M(T),T;const{data:l}=await L.auth.getUser(),s=l?.user?.id||null;if(s){const{data:h,error:f}=await L.from("user_font_preferences").select("*").eq("user_id",s).single();if(!f&&h)return T=h,R=t,M(T),T;const{data:E,error:g}=await L.from("user_font_preferences").upsert({user_id:s,font_family:j.font_family,font_size_scale:j.font_size_scale,line_height_scale:j.line_height_scale,font_weight:j.font_weight,letter_spacing_scale:j.letter_spacing_scale,is_arabic_optimized:j.is_arabic_optimized,custom_css_variables:j.custom_css_variables},{onConflict:"user_id"}).select().single();if(!g&&E)return T=E,R=t,M(T),T}const c=J(null);return c?(T=c,R=t,c):{...j,id:"default",user_id:"default",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}catch(a){console.warn("Falling back to local font preferences due to error:",a);let n=null;try{const{data:s}=await L.auth.getUser();n=s?.user?.id||null}catch{}try{if(n){const s=ee(n),c=localStorage.getItem(s),h=localStorage.getItem($);if(!c&&h){localStorage.setItem(s,h);try{localStorage.removeItem($)}catch{}}}}catch{}const l=J(n);return l?(T=l,R=t,l):{...j,id:"default",user_id:"default",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}}async function fa(t){try{const{data:a}=await L.auth.getUser(),n=a?.user?.id||null,l=await ye(),s=Z(n)?n:Z(l.user_id)?l.user_id:null,c={font_family:t.font_family??l.font_family,font_size_scale:t.font_size_scale??l.font_size_scale,line_height_scale:t.line_height_scale??l.line_height_scale,font_weight:t.font_weight??l.font_weight,letter_spacing_scale:t.letter_spacing_scale??l.letter_spacing_scale,is_arabic_optimized:t.is_arabic_optimized??l.is_arabic_optimized,custom_css_variables:t.custom_css_variables??l.custom_css_variables},{data:h,error:f}=await L.rpc("upsert_user_font_preferences",{p_font_family:c.font_family,p_font_size_scale:c.font_size_scale,p_line_height_scale:c.line_height_scale,p_font_weight:c.font_weight,p_letter_spacing_scale:c.letter_spacing_scale,p_is_arabic_optimized:c.is_arabic_optimized,p_custom_css_variables:c.custom_css_variables});if(f){console.warn("RPC upsert_user_font_preferences failed, attempting table upsert fallback. Error:",f);try{const{data:g,error:d}=await L.from("user_font_preferences").upsert({user_id:s,font_family:c.font_family,font_size_scale:c.font_size_scale,line_height_scale:c.line_height_scale,font_weight:c.font_weight,letter_spacing_scale:c.letter_spacing_scale,is_arabic_optimized:c.is_arabic_optimized,custom_css_variables:c.custom_css_variables??{}},{onConflict:"user_id"}).select().single();if(d)throw M({...c,id:l.id,user_id:s||"local"}),d;const p=g;return M(p),T=null,R=0,p}catch(g){throw console.error("Table upsert fallback also failed:",g),M({...c,id:l.id,user_id:s||"local"}),g}}const E=h;return M(E),T=null,R=0,E}catch(a){throw console.error("Error updating font preferences:",a),M(t),a}}function de(t){const a=document.documentElement,n=t.font_family||j.font_family,l=t.font_size_scale??j.font_size_scale,s=t.line_height_scale??j.line_height_scale,c=t.font_weight||j.font_weight,h=t.letter_spacing_scale??j.letter_spacing_scale,f=!!t.is_arabic_optimized,E=t.custom_css_variables??{};a.style.setProperty("--user-font-family",n),a.style.setProperty("--user-font-size-scale",String(l)),a.style.setProperty("--user-line-height-scale",String(s)),a.style.setProperty("--user-font-weight",c),a.style.setProperty("--user-letter-spacing-scale",String(h)),f?(a.style.setProperty("--user-arabic-optimized","1"),a.classList.add("arabic-optimized")):(a.style.setProperty("--user-arabic-optimized","0"),a.classList.remove("arabic-optimized")),Object.entries(E).forEach(([d,p])=>{a.style.setProperty(`--user-${d}`,String(p))}),a.className=a.className.replace(/font-scale-\d+/g,"");const g=`font-scale-${Math.round(l*100)}`;a.classList.add(g)}async function Pa(){return await fa(j)}function xa(){T=null,R=0}function Fa(t="mixed"){return{en:{heading:"Sample Heading Text",body:"This is a sample paragraph to show how the selected font looks. You can see the font family, size, weight, and spacing in action.",numbers:"1234567890"},ar:{heading:"عنوان نموذجي للنص",body:"هذه فقرة نموذجية لإظهار كيف يبدو الخط المحدد. يمكنك رؤية عائلة الخط وحجمه ووزنه والمسافات أثناء العمل.",numbers:"١٢٣٤٥٦٧٨٩٠"},mixed:{heading:"Sample Heading / عنوان نموذجي",body:"This is mixed text showing both English and Arabic: هذا نص مختلط يظهر الإنجليزية والعربية معًا.",numbers:"1234567890 / ١٢٣٤٥٦٧٨٩٠"}}[t]}const _a=x.createContext(void 0),ba=({children:t})=>{const[a,n]=x.useState(null),[l,s]=x.useState(!0),[c,h]=x.useState(null),{user:f}=q(),E=async()=>{if(!f){n(null),s(!1);return}try{h(null);try{const r=f?.id||null;if(r){const z=`font_prefs_v1/${r}`,w=localStorage.getItem(z),P=localStorage.getItem("font_prefs_v1");if(!w&&P){localStorage.setItem(z,P);try{localStorage.removeItem("font_prefs_v1")}catch{}}}}catch{}const p=await ye();n(p),de(p)}catch(p){console.error("Error loading font preferences:",p),h(p instanceof Error?p.message:"Failed to load font preferences")}finally{s(!1)}},g=p=>{n(p),de(p);try{const r=`font_prefs_v1/${p.user_id||"local"}`;localStorage.setItem(r,JSON.stringify(p))}catch{}};x.useEffect(()=>{if(f)s(!0),E();else{n(null),s(!1),xa();const p=document.documentElement;p.style.removeProperty("--user-font-family"),p.style.removeProperty("--user-font-size-scale"),p.style.removeProperty("--user-line-height-scale"),p.style.removeProperty("--user-font-weight"),p.style.removeProperty("--user-letter-spacing-scale"),p.style.removeProperty("--user-arabic-optimized"),p.classList.remove("arabic-optimized"),p.className=p.className.replace(/font-scale-\d+/g,"")}},[f]),x.useEffect(()=>{if(a){const p=document.getElementById("user-font-preferences");p&&p.remove();const r=document.createElement("style");r.id="user-font-preferences",r.textContent=`
        /* User Font Preferences - Dynamic CSS */
        :root {
          --user-font-family: ${a.font_family};
          --user-font-size-scale: ${a.font_size_scale};
          --user-line-height-scale: ${a.line_height_scale};
          --user-font-weight: ${a.font_weight};
          --user-letter-spacing-scale: ${a.letter_spacing_scale};
          --user-arabic-optimized: ${a.is_arabic_optimized?"1":"0"};
        }

        /* Apply user font preferences to common elements */
        body, 
        .MuiTypography-root, 
        input, 
        select, 
        textarea, 
        button {
          font-family: var(--user-font-family, var(--font-family)) !important;
          font-size: calc(1em * var(--user-font-size-scale, 1)) !important;
          line-height: calc(1.5 * var(--user-line-height-scale, 1)) !important;
          letter-spacing: calc(0.02em * (var(--user-letter-spacing-scale, 1) - 1)) !important;
        }

        /* Headers with appropriate scaling */
        h1, .MuiTypography-h1 {
          font-weight: var(--user-font-weight, 700) !important;
          font-size: calc(2.125rem * var(--user-font-size-scale, 1)) !important;
          line-height: calc(1.2 * var(--user-line-height-scale, 1)) !important;
        }

        h2, .MuiTypography-h2 {
          font-weight: var(--user-font-weight, 600) !important;
          font-size: calc(1.875rem * var(--user-font-size-scale, 1)) !important;
          line-height: calc(1.25 * var(--user-line-height-scale, 1)) !important;
        }

        h3, .MuiTypography-h3 {
          font-weight: var(--user-font-weight, 600) !important;
          font-size: calc(1.5rem * var(--user-font-size-scale, 1)) !important;
          line-height: calc(1.3 * var(--user-line-height-scale, 1)) !important;
        }

        h4, .MuiTypography-h4 {
          font-weight: var(--user-font-weight, 600) !important;
          font-size: calc(1.25rem * var(--user-font-size-scale, 1)) !important;
          line-height: calc(1.35 * var(--user-line-height-scale, 1)) !important;
        }

        h5, .MuiTypography-h5 {
          font-weight: var(--user-font-weight, 600) !important;
          font-size: calc(1.125rem * var(--user-font-size-scale, 1)) !important;
          line-height: calc(1.4 * var(--user-line-height-scale, 1)) !important;
        }

        h6, .MuiTypography-h6 {
          font-weight: var(--user-font-weight, 600) !important;
          font-size: calc(1rem * var(--user-font-size-scale, 1)) !important;
          line-height: calc(1.43 * var(--user-line-height-scale, 1)) !important;
        }

        /* Arabic optimization styles */
        .arabic-optimized {
          --ar-font-adjustment: 1.1;
        }

        .arabic-optimized p,
        .arabic-optimized .arabic-text,
        .arabic-optimized [dir="rtl"] {
          font-size: calc(1em * var(--user-font-size-scale, 1) * var(--ar-font-adjustment, 1)) !important;
          line-height: calc(1.6 * var(--user-line-height-scale, 1)) !important;
          letter-spacing: calc(0.01em * var(--user-letter-spacing-scale, 1)) !important;
        }

        /* Table and data display elements */
        .data-table, 
        .table-cell,
        .MuiTableCell-root {
          font-size: calc(0.875rem * var(--user-font-size-scale, 1)) !important;
          line-height: calc(1.43 * var(--user-line-height-scale, 1)) !important;
        }

        /* Form elements */
        .form-field label,
        .MuiFormLabel-root {
          font-weight: var(--user-font-weight, 500) !important;
          font-size: calc(0.9rem * var(--user-font-size-scale, 1)) !important;
        }

        /* Button text */
        button, 
        .MuiButton-root {
          font-weight: var(--user-font-weight, 500) !important;
          font-size: calc(0.875rem * var(--user-font-size-scale, 1)) !important;
          letter-spacing: calc(0.02em * var(--user-letter-spacing-scale, 1)) !important;
        }

        /* Small text and captions */
        small, 
        .caption,
        .MuiTypography-caption {
          font-size: calc(0.75rem * var(--user-font-size-scale, 1)) !important;
          line-height: calc(1.43 * var(--user-line-height-scale, 1)) !important;
        }

        /* High contrast support */
        @media (prefers-contrast: high) {
          body, .MuiTypography-root {
            font-weight: bolder !important;
          }
        }

        /* Large text accessibility support */
        @media (prefers-reduced-motion: reduce) {
          * {
            transition: none !important;
            animation: none !important;
          }
        }
      `,document.head.appendChild(r)}},[a]);const d={preferences:a,loading:l,error:c,refreshPreferences:E,applyPreferences:g};return e.jsx(_a.Provider,{value:d,children:t})};ke.createRoot(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(Ce,{children:e.jsx(ba,{children:e.jsx(Bt,{children:e.jsx(Pe,{children:e.jsx(Fe,{children:e.jsx(ga,{})})})})})})}));export{za as A,Ca as F,de as a,Fa as b,fa as c,Ta as d,ye as g,Pa as r,se as t,W as u};
//# sourceMappingURL=index-BxOxxrfp.js.map
