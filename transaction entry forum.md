<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# شكل توضيحي لشاشة إدخال القيد المحاسبي

## النموذج المقترح

الشاشة تتكوّن من بطاقة رأس القيد في الأعلى وبطاقة شبكة أسطر القيد بالأسفل، مع أزرار الإجراءات وحالة القيد ومؤشرات التوازن، وبنمط داكن من اليمين لليسار كما هو مستخدم لديكم.

![Wireframe: شاشة إدخال قيد اليومية (رأس + شبكة أسطر)](https://ppl-ai-code-interpreter-files.s3.amazonaws.com/web/direct-files/fb8ff31eeea55f90a54ffe7855b75221/fac07076-d2ec-43bf-ac13-a37bfaf7eab5/f762a8be.png)

Wireframe: شاشة إدخال قيد اليومية (رأس + شبكة أسطر)

## مكونات رأس القيد

- عنوان: قيد يومية جديد. حقول مرتّبة بعمودين RTL: رقم القيد (عرض فقط)، تاريخ القيد، تاريخ الترحيل، الوصف، رقم المرجع، ملاحظات.[^1]
- شرائح الحالة: مسودة، مُرسَل، مُعتمد، مُرحّل مع تلوين واضح. أزرار الإجراءات: حفظ مسودة، إرسال للمراجعة، اعتماد، ترحيل، إلغاء، مرفقات.[^2]


## شبكة أسطر القيد

- شريط أدوات: إضافة سطر، من قالب، لصق من Excel، بحث الحساب.[^1]
- الأعمدة: رقم، الحساب، وصف السطر، المشروع، مركز التكلفة، بند التحليل، الشجرة الفرعية، مدين، دائن، المصدر، المرجع.[^1]
- تذييل الشبكة: إجمالي المدين، إجمالي الدائن، الفرق، شارة متوازن/غير متوازن، عدد الأسطر.[^1]


## قواعد التحقق الفوري

- لكل سطر: أحد المبلغين فقط موجب، والآخر صفر؛ ممنوع القيم السالبة.[^1]
- للقيد: عدد الأسطر ≥ 2، ومجموع المدين = مجموع الدائن لتفعيل الإرسال/الترحيل.[^1]
- تنبيهات واضحة ورسائل إرشادية مع تلميحات اختصارات: Enter لإضافة سطر، Ctrl+↑/↓ للتنقّل.[^1]


## التكامل مع دورة الاعتماد

- حالات القيد: draft → submitted → approved → posted مع احترام auto_post_on_approve إن وُجد، وإظهار السجل الزمني للمراجعة في الشريط الجانبي.[^2]
- ربط بالمصدر: دعم source_module وsource_document_id وsource_document_line_id على مستوى السطر لسيناريوهات الفواتير والتسويات.[^2]


## الأداء وقابلية الصيانة

- استخدام الحقول المجمّعة في الرأس line_items_total وline_items_count وtotal_debits/total_credits لتسريع القوائم، وتحديثها بالـ triggers الحالية.[^1]
- فهرسة أعمدة البحث الشائعة (org_id, entry_date, approval_status, is_posted) كما في مخططكم لضمان زمن استجابة منخفض في سجلات كبيرة.[^3]

هذا التصميم يطبّق المعيار العالمي لشاشات القيد المحاسبي مع الحفاظ على لغتكم البصرية الحالية، ويضمن توازناً صارماً، وإدخالاً سريعاً، وتتبعاً خطياً دقيقاً للمصادر، مع أقل تغييرات ممكنة على عادات المستخدمين.[^2][^1]

<div align="center">⁂</div>

[^1]: unified-multiline-entry.md

[^2]: ReceivedSupplierInvoices_FinalPlan.md

[^3]: Supabase-Snippet-Schema-Catalog-JSON-1.csv

